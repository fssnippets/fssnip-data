<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">  1: </span>
<span class="l">  2: </span>
<span class="l">  3: </span>
<span class="l">  4: </span>
<span class="l">  5: </span>
<span class="l">  6: </span>
<span class="l">  7: </span>
<span class="l">  8: </span>
<span class="l">  9: </span>
<span class="l"> 10: </span>
<span class="l"> 11: </span>
<span class="l"> 12: </span>
<span class="l"> 13: </span>
<span class="l"> 14: </span>
<span class="l"> 15: </span>
<span class="l"> 16: </span>
<span class="l"> 17: </span>
<span class="l"> 18: </span>
<span class="l"> 19: </span>
<span class="l"> 20: </span>
<span class="l"> 21: </span>
<span class="l"> 22: </span>
<span class="l"> 23: </span>
<span class="l"> 24: </span>
<span class="l"> 25: </span>
<span class="l"> 26: </span>
<span class="l"> 27: </span>
<span class="l"> 28: </span>
<span class="l"> 29: </span>
<span class="l"> 30: </span>
<span class="l"> 31: </span>
<span class="l"> 32: </span>
<span class="l"> 33: </span>
<span class="l"> 34: </span>
<span class="l"> 35: </span>
<span class="l"> 36: </span>
<span class="l"> 37: </span>
<span class="l"> 38: </span>
<span class="l"> 39: </span>
<span class="l"> 40: </span>
<span class="l"> 41: </span>
<span class="l"> 42: </span>
<span class="l"> 43: </span>
<span class="l"> 44: </span>
<span class="l"> 45: </span>
<span class="l"> 46: </span>
<span class="l"> 47: </span>
<span class="l"> 48: </span>
<span class="l"> 49: </span>
<span class="l"> 50: </span>
<span class="l"> 51: </span>
<span class="l"> 52: </span>
<span class="l"> 53: </span>
<span class="l"> 54: </span>
<span class="l"> 55: </span>
<span class="l"> 56: </span>
<span class="l"> 57: </span>
<span class="l"> 58: </span>
<span class="l"> 59: </span>
<span class="l"> 60: </span>
<span class="l"> 61: </span>
<span class="l"> 62: </span>
<span class="l"> 63: </span>
<span class="l"> 64: </span>
<span class="l"> 65: </span>
<span class="l"> 66: </span>
<span class="l"> 67: </span>
<span class="l"> 68: </span>
<span class="l"> 69: </span>
<span class="l"> 70: </span>
<span class="l"> 71: </span>
<span class="l"> 72: </span>
<span class="l"> 73: </span>
<span class="l"> 74: </span>
<span class="l"> 75: </span>
<span class="l"> 76: </span>
<span class="l"> 77: </span>
<span class="l"> 78: </span>
<span class="l"> 79: </span>
<span class="l"> 80: </span>
<span class="l"> 81: </span>
<span class="l"> 82: </span>
<span class="l"> 83: </span>
<span class="l"> 84: </span>
<span class="l"> 85: </span>
<span class="l"> 86: </span>
<span class="l"> 87: </span>
<span class="l"> 88: </span>
<span class="l"> 89: </span>
<span class="l"> 90: </span>
<span class="l"> 91: </span>
<span class="l"> 92: </span>
<span class="l"> 93: </span>
<span class="l"> 94: </span>
<span class="l"> 95: </span>
<span class="l"> 96: </span>
<span class="l"> 97: </span>
<span class="l"> 98: </span>
<span class="l"> 99: </span>
<span class="l">100: </span>
<span class="l">101: </span>
<span class="l">102: </span>
<span class="l">103: </span>
<span class="l">104: </span>
<span class="l">105: </span>
<span class="l">106: </span>
<span class="l">107: </span>
<span class="l">108: </span>
<span class="l">109: </span>
<span class="l">110: </span>
<span class="l">111: </span>
<span class="l">112: </span>
<span class="l">113: </span>
<span class="l">114: </span>
<span class="l">115: </span>
<span class="l">116: </span>
<span class="l">117: </span>
<span class="l">118: </span>
<span class="l">119: </span>
<span class="l">120: </span>
<span class="l">121: </span>
<span class="l">122: </span>
<span class="l">123: </span>
<span class="l">124: </span>
<span class="l">125: </span>
<span class="l">126: </span>
<span class="l">127: </span>
<span class="l">128: </span>
<span class="l">129: </span>
<span class="l">130: </span>
<span class="l">131: </span>
<span class="l">132: </span>
<span class="l">133: </span>
<span class="l">134: </span>
<span class="l">135: </span>
<span class="l">136: </span>
<span class="l">137: </span>
<span class="l">138: </span>
<span class="l">139: </span>
<span class="l">140: </span>
<span class="l">141: </span>
<span class="l">142: </span>
<span class="l">143: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">namespace</span> <span class="id">Sink</span><span class="pn">.</span><span class="id">Subscriptions</span>

<span class="k">module</span> <span class="m">MatterMost</span> <span class="o">=</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">System</span>
    <span class="k">open</span> <span class="id">Sink</span><span class="pn">.</span><span class="id">Serdes</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 2)" onmouseover="showTip(event, 'fs1', 2)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 3)" onmouseover="showTip(event, 'fs2', 3)" class="id">Text</span>
    <span class="k">open</span> <span class="id">Thoth</span><span class="pn">.</span><span class="id">Json</span><span class="pn">.</span><span class="id">Net</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 4)" onmouseover="showTip(event, 'fs1', 4)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 5)" onmouseover="showTip(event, 'fs3', 5)" class="id">Threading</span>
    <span class="k">open</span> <span class="id">MatterMostAdapter</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="id">Microsoft</span><span class="pn">.</span><span class="id">Bot</span><span class="pn">.</span><span class="id">Schema</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 7)" onmouseover="showTip(event, 'fs1', 7)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="id">Net</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="id">WebSockets</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 10)" onmouseover="showTip(event, 'fs1', 10)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 11)" onmouseover="showTip(event, 'fs3', 11)" class="id">Threading</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 12)" onmouseover="showTip(event, 'fs7', 12)" class="id">Tasks</span>
    <span class="k">open</span> <span class="id">Sink</span><span class="pn">.</span><span class="id">Config</span><span class="pn">.</span><span class="id">ParsedConfig</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs8', 13)" onmouseover="showTip(event, 'fs8', 13)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 14)" onmouseover="showTip(event, 'fs9', 14)" class="id">Control</span><span class="pn">.</span><span class="id">Websockets</span>
    <span class="k">open</span> <span class="id">MatterMost</span><span class="pn">.</span><span class="id">Types</span><span class="pn">.</span><span class="id">Websockets</span>
    <span class="k">open</span> <span class="id">Sink</span><span class="pn">.</span><span class="id">Bot</span><span class="pn">.</span><span class="id">BotHelpers</span><span class="pn">.</span><span class="id">Proactive</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs8', 15)" onmouseover="showTip(event, 'fs8', 15)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 16)" onmouseover="showTip(event, 'fs9', 16)" class="id">Control</span><span class="pn">.</span><span class="id">Tasks</span><span class="pn">.</span><span class="id">V2</span><span class="pn">.</span><span class="id">ContextInsensitive</span>

    <span class="k">module</span> <span class="id">Bot</span> <span class="o">=</span> <span class="id">Sink</span><span class="pn">.</span><span class="id">Bot</span><span class="pn">.</span><span class="id">BotHelpers</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 17)" onmouseover="showTip(event, 'fs10', 17)" class="id">decodeResponse</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs11', 18)" onmouseover="showTip(event, 'fs11', 18)" class="rt">Decoder</span><span class="pn">&lt;</span><span class="id">WebsocketResponse</span><span class="pn">&gt;</span> <span class="o">=</span>
        <span class="id">Decode</span><span class="pn">.</span><span class="id">oneOf</span> <span class="pn">[</span>
            <span class="id">WebsocketResponse</span><span class="pn">.</span><span class="id">Decode</span> <span class="id">EmptyResponse</span><span class="pn">.</span><span class="id">Decode</span> <span class="o">|&gt;</span> <span class="id">mapDecoder</span> <span class="id">WebsocketResponse</span><span class="pn">.</span><span class="id">Empty</span>
        <span class="pn">]</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="id">decodeEventData</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs11', 20)" onmouseover="showTip(event, 'fs11', 20)" class="rt">Decoder</span><span class="pn">&lt;</span><span class="id">WebsocketEvent</span><span class="pn">&gt;</span> <span class="o">=</span>
        <span class="id">Decode</span><span class="pn">.</span><span class="id">oneOf</span> <span class="pn">[</span>
            <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Decode</span> <span class="id">HelloEvent</span><span class="pn">.</span><span class="id">Decode</span>        <span class="o">|&gt;</span> <span class="id">mapDecoder</span> <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Hello</span>
            <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Decode</span> <span class="id">PostedEvent</span><span class="pn">.</span><span class="id">Decode</span>       <span class="o">|&gt;</span> <span class="id">mapDecoder</span> <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Posted</span>
            <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Decode</span> <span class="id">TypingEvent</span><span class="pn">.</span><span class="id">Decode</span>       <span class="o">|&gt;</span> <span class="id">mapDecoder</span> <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Typing</span>
            <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Decode</span> <span class="id">StatusChangeEvent</span><span class="pn">.</span><span class="id">Decode</span> <span class="o">|&gt;</span> <span class="id">mapDecoder</span> <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">StatusChange</span>
        <span class="pn">]</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 21)" onmouseover="showTip(event, 'fs13', 21)" class="id">decodeIncomingMessage</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs11', 22)" onmouseover="showTip(event, 'fs11', 22)" class="rt">Decoder</span><span class="pn">&lt;</span><span class="id">IncomingWebsocketMessage</span><span class="pn">&gt;</span> <span class="o">=</span>
        <span class="id">Decode</span><span class="pn">.</span><span class="id">oneOf</span> <span class="pn">[</span>
             <span onmouseout="hideTip(event, 'fs10', 23)" onmouseover="showTip(event, 'fs10', 23)" class="id">decodeResponse</span>  <span class="o">|&gt;</span> <span class="id">mapDecoder</span> <span class="id">IncomingWebsocketMessage</span><span class="pn">.</span><span class="id">Response</span>
             <span onmouseout="hideTip(event, 'fs12', 24)" onmouseover="showTip(event, 'fs12', 24)" class="id">decodeEventData</span> <span class="o">|&gt;</span> <span class="id">mapDecoder</span> <span class="id">IncomingWebsocketMessage</span><span class="pn">.</span><span class="id">Event</span>
        <span class="pn">]</span>

    <span class="c">// Testing</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 25)" onmouseover="showTip(event, 'fs14', 25)" class="fn">handleTyping</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs15', 26)" onmouseover="showTip(event, 'fs15', 26)" class="id">botId</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="id">httpContext</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="fn">handler</span><span class="pn">:</span> <span class="id">ProactiveCallback</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 29)" onmouseover="showTip(event, 'fs18', 29)" class="d">Task</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs19', 30)" onmouseover="showTip(event, 'fs19', 30)" class="id">event</span><span class="pn">:</span> <span class="id">WebsocketEvent</span><span class="pn">&lt;</span><span class="id">TypingEvent</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="o">=</span> <span class="id">task</span> <span class="pn">{</span>
        <span class="k">let</span> <span class="id">user</span> <span class="o">=</span> <span class="id">ChannelAccount</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs20', 31)" onmouseover="showTip(event, 'fs20', 31)" class="id">id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 32)" onmouseover="showTip(event, 'fs19', 32)" class="id">event</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 33)" onmouseover="showTip(event, 'fs21', 33)" class="id">Data</span><span class="pn">.</span><span class="id">UserId</span><span class="pn">,</span> <span class="id">Name</span> <span class="o">=</span> <span class="s">&quot;&lt;to retrieve from MM&gt;&quot;</span><span class="pn">)</span>

        <span class="k">let</span> <span class="id">callback</span><span class="pn">:</span> <span class="id">ProactiveCallback</span> <span class="o">=</span>
            <span class="k">fun</span> <span class="id">ctx</span> <span class="id">cancellationToken</span> <span class="k">-&gt;</span>
                <span class="k">let</span> <span class="id">activity</span> <span class="o">=</span>
                    <span class="id">Activity</span> <span class="pn">(</span>
                        <span onmouseout="hideTip(event, 'fs22', 34)" onmouseover="showTip(event, 'fs22', 34)" class="id">Type</span>         <span class="o">=</span> <span class="id">ActivityTypes</span><span class="pn">.</span><span class="id">ConversationUpdate</span><span class="pn">,</span>
                        <span class="c">// The &#39;Channel&#39; identifier - &quot;mattermost&quot; in this case</span>
                        <span class="id">ChannelId</span>    <span class="o">=</span> <span class="id">MatterMostHelper</span><span class="pn">.</span><span class="id">ChannelId</span><span class="pn">,</span>
                        <span class="c">// The user who created the post</span>
                        <span class="id">From</span>         <span class="o">=</span> <span class="id">user</span><span class="pn">,</span>
                        <span class="id">Recipient</span>    <span class="o">=</span> <span class="id">ChannelAccount</span> <span class="pn">(</span><span class="id">Id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 35)" onmouseover="showTip(event, 'fs15', 35)" class="id">botId</span><span class="pn">)</span><span class="pn">,</span>
                        <span class="c">// The MatterMost channel the message was created in</span>
                        <span class="id">Conversation</span> <span class="o">=</span> <span class="id">ConversationAccount</span> <span class="pn">(</span><span class="id">Id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 36)" onmouseover="showTip(event, 'fs19', 36)" class="id">event</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 37)" onmouseover="showTip(event, 'fs21', 37)" class="id">Broadcast</span><span class="pn">.</span><span class="id">ChannelId</span><span class="pn">)</span><span class="pn">,</span>
                        <span class="id">MembersAdded</span> <span class="o">=</span> <span class="pn">[|</span> <span class="id">user</span> <span class="pn">|]</span>
                    <span class="pn">)</span>
                <span class="id">Bot</span><span class="pn">.</span><span class="id">runSingle</span> <span class="id">ctx</span> <span class="id">activity</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs18', 38)" onmouseover="showTip(event, 'fs18', 38)" class="id">Task</span>

        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs17', 39)" onmouseover="showTip(event, 'fs17', 39)" class="id">handler</span> <span class="id">callback</span>
    <span class="pn">}</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs23', 40)" onmouseover="showTip(event, 'fs23', 40)" class="fn">handleStatusChange</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs15', 41)" onmouseover="showTip(event, 'fs15', 41)" class="id">botId</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs16', 42)" onmouseover="showTip(event, 'fs16', 42)" class="id">httpContext</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs17', 43)" onmouseover="showTip(event, 'fs17', 43)" class="fn">handler</span><span class="pn">:</span> <span class="id">ProactiveCallback</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 44)" onmouseover="showTip(event, 'fs18', 44)" class="d">Task</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs19', 45)" onmouseover="showTip(event, 'fs19', 45)" class="id">event</span><span class="pn">:</span> <span class="id">WebsocketEvent</span><span class="pn">&lt;</span><span class="id">StatusChangeEvent</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="o">=</span> <span class="id">task</span> <span class="pn">{</span>
        <span class="c">// TODO: Retrieve username</span>
        <span class="k">let</span> <span class="id">user</span> <span class="o">=</span> <span class="id">ChannelAccount</span> <span class="pn">(</span><span class="id">Id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 46)" onmouseover="showTip(event, 'fs19', 46)" class="id">event</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 47)" onmouseover="showTip(event, 'fs21', 47)" class="id">Data</span><span class="pn">.</span><span class="id">UserId</span><span class="pn">,</span> <span class="id">Name</span> <span class="o">=</span> <span class="s">&quot;&lt;to retrieve from MM&gt;&quot;</span><span class="pn">)</span>

        <span class="k">let</span> <span class="id">callback</span><span class="pn">:</span> <span class="id">ProactiveCallback</span> <span class="o">=</span>
            <span class="k">fun</span> <span class="id">ctx</span> <span class="id">cancellationToken</span> <span class="k">-&gt;</span>
                <span class="k">let</span> <span class="id">activity</span> <span class="o">=</span>
                    <span class="id">Activity</span> <span class="pn">(</span>
                        <span onmouseout="hideTip(event, 'fs22', 48)" onmouseover="showTip(event, 'fs22', 48)" class="id">Type</span>         <span class="o">=</span> <span class="s">&quot;statusChange&quot;</span><span class="pn">,</span>
                        <span onmouseout="hideTip(event, 'fs2', 49)" onmouseover="showTip(event, 'fs2', 49)" class="id">Text</span>         <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 50)" onmouseover="showTip(event, 'fs19', 50)" class="id">event</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 51)" onmouseover="showTip(event, 'fs21', 51)" class="id">Data</span><span class="pn">.</span><span class="id">Status</span><span class="pn">,</span>
                        <span class="c">// The &#39;Channel&#39; identifier - &quot;mattermost&quot; in this case</span>
                        <span class="id">ChannelId</span>    <span class="o">=</span> <span class="id">MatterMostHelper</span><span class="pn">.</span><span class="id">ChannelId</span><span class="pn">,</span>
                        <span class="c">// The user who&#39;s status changed</span>
                        <span class="id">From</span>         <span class="o">=</span> <span class="id">user</span><span class="pn">,</span>
                        <span class="id">Recipient</span>    <span class="o">=</span> <span class="id">ChannelAccount</span> <span class="pn">(</span><span class="id">Id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 52)" onmouseover="showTip(event, 'fs15', 52)" class="id">botId</span><span class="pn">)</span><span class="pn">,</span>
                        <span class="c">// This will be empty as it refers to no channel!</span>
                        <span class="id">Conversation</span> <span class="o">=</span> <span class="id">ConversationAccount</span> <span class="pn">(</span><span class="id">Id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 53)" onmouseover="showTip(event, 'fs19', 53)" class="id">event</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 54)" onmouseover="showTip(event, 'fs21', 54)" class="id">Broadcast</span><span class="pn">.</span><span class="id">ChannelId</span><span class="pn">)</span><span class="pn">,</span>
                        <span class="id">MembersAdded</span> <span class="o">=</span> <span class="pn">[|</span> <span class="id">user</span> <span class="pn">|]</span>
                    <span class="pn">)</span>
                <span class="id">Bot</span><span class="pn">.</span><span class="id">runSingle</span> <span class="id">ctx</span> <span class="id">activity</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs18', 55)" onmouseover="showTip(event, 'fs18', 55)" class="id">Task</span>

        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs17', 56)" onmouseover="showTip(event, 'fs17', 56)" class="id">handler</span> <span class="id">callback</span>
    <span class="pn">}</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 57)" onmouseover="showTip(event, 'fs24', 57)" class="fn">handleWebsocketEvent</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs15', 58)" onmouseover="showTip(event, 'fs15', 58)" class="id">botId</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs16', 59)" onmouseover="showTip(event, 'fs16', 59)" class="id">httpContext</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs17', 60)" onmouseover="showTip(event, 'fs17', 60)" class="fn">handler</span><span class="pn">:</span> <span class="id">ProactiveCallback</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 61)" onmouseover="showTip(event, 'fs18', 61)" class="d">Task</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs25', 62)" onmouseover="showTip(event, 'fs25', 62)" class="id">websocketEvent</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs18', 63)" onmouseover="showTip(event, 'fs18', 63)" class="d">Task</span> <span class="o">=</span> <span class="k">upcast</span> <span class="id">task</span> <span class="pn">{</span>
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs25', 64)" onmouseover="showTip(event, 'fs25', 64)" class="id">websocketEvent</span> <span class="k">with</span>
        <span class="pn">|</span> <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">StatusChange</span> <span class="id">event</span> <span class="k">-&gt;</span> <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs23', 65)" onmouseover="showTip(event, 'fs23', 65)" class="id">handleStatusChange</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs15', 66)" onmouseover="showTip(event, 'fs15', 66)" class="id">botId</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs16', 67)" onmouseover="showTip(event, 'fs16', 67)" class="id">httpContext</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs17', 68)" onmouseover="showTip(event, 'fs17', 68)" class="id">handler</span> <span class="id">event</span>
        <span class="pn">|</span> <span class="id">WebsocketEvent</span><span class="pn">.</span><span class="id">Typing</span> <span class="id">event</span>       <span class="k">-&gt;</span> <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs14', 69)" onmouseover="showTip(event, 'fs14', 69)" class="id">handleTyping</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs15', 70)" onmouseover="showTip(event, 'fs15', 70)" class="id">botId</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs16', 71)" onmouseover="showTip(event, 'fs16', 71)" class="id">httpContext</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs17', 72)" onmouseover="showTip(event, 'fs17', 72)" class="id">handler</span> <span class="id">event</span>
        <span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span class="pn">(</span><span class="pn">)</span>
    <span class="pn">}</span>

    <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs26', 73)" onmouseover="showTip(event, 'fs26', 73)" class="fn">subscribe</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs27', 74)" onmouseover="showTip(event, 'fs27', 74)" class="id">logger</span><span class="pn">:</span> <span class="id">Serilog</span><span class="pn">.</span><span class="id">ILogger</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 75)" onmouseover="showTip(event, 'fs28', 75)" class="id">config</span><span class="pn">:</span> <span class="id">MatterMostWebsocketConfig</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs29', 76)" onmouseover="showTip(event, 'fs29', 76)" class="fn">websocketEventHandler</span><span class="pn">:</span> <span class="id">WebsocketEvent</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 77)" onmouseover="showTip(event, 'fs18', 77)" class="d">Task</span><span class="pn">)</span> <span class="o">=</span> <span class="id">task</span> <span class="pn">{</span>
        <span class="k">let</span> <span class="id">cancellationToken</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs30', 78)" onmouseover="showTip(event, 'fs30', 78)" class="id">CancellationToken</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 79)" onmouseover="showTip(event, 'fs31', 79)" class="id">None</span>

        <span class="k">let</span> <span class="id">auth</span> <span class="o">=</span>
            <span class="pn">(</span><span class="id">MatterMost</span><span class="pn">.</span><span class="id">Websockets</span><span class="pn">.</span><span class="id">generateAuthRequestBody</span> <span onmouseout="hideTip(event, 'fs28', 80)" onmouseover="showTip(event, 'fs28', 80)" class="id">config</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 81)" onmouseover="showTip(event, 'fs21', 81)" class="id">Token</span><span class="pn">)</span>
                <span class="pn">.</span><span class="id">ToString</span> <span class="pn">(</span><span class="id">Newtonsoft</span><span class="pn">.</span><span class="id">Json</span><span class="pn">.</span><span class="id">Formatting</span><span class="pn">.</span><span class="id">None</span><span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 82)" onmouseover="showTip(event, 'fs32', 82)" class="id">Encoding</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 83)" onmouseover="showTip(event, 'fs33', 83)" class="id">UTF8</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 84)" onmouseover="showTip(event, 'fs21', 84)" class="id">GetBytes</span>

        <span class="k">let</span> <span class="id">websocket</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs34', 85)" onmouseover="showTip(event, 'fs34', 85)" class="id">ClientWebSocket</span> <span class="pn">(</span><span class="pn">)</span>

        <span class="c">// Connect</span>
        <span class="k">do!</span> <span class="id">websocket</span><span class="pn">.</span><span class="id">ConnectAsync</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs35', 86)" onmouseover="showTip(event, 'fs35', 86)" class="id">Uri</span> <span onmouseout="hideTip(event, 'fs28', 87)" onmouseover="showTip(event, 'fs28', 87)" class="id">config</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 88)" onmouseover="showTip(event, 'fs21', 88)" class="id">Uri</span><span class="pn">,</span> <span class="id">cancellationToken</span><span class="pn">)</span>

        <span class="c">// Authenticate</span>
        <span class="k">do!</span> <span class="id">websocket</span><span class="pn">.</span><span class="id">SendAsync</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs36', 89)" onmouseover="showTip(event, 'fs36', 89)" class="id">ArraySegment</span> <span class="id">auth</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs37', 90)" onmouseover="showTip(event, 'fs37', 90)" class="id">WebSocketMessageType</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs38', 91)" onmouseover="showTip(event, 'fs38', 91)" class="id">Text</span><span class="pn">,</span> <span class="k">true</span><span class="pn">,</span> <span class="id">cancellationToken</span><span class="pn">)</span>

        <span class="k">let</span> <span class="id">threadSafeWebSocket</span> <span class="o">=</span> <span class="id">ThreadSafeWebSocket</span><span class="pn">.</span><span class="id">createFromWebSocket</span> <span class="id">websocket</span>

        <span class="k">while</span> <span class="id">threadSafeWebSocket</span><span class="pn">.</span><span class="id">State</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs39', 92)" onmouseover="showTip(event, 'fs39', 92)" class="id">WebSocketState</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs40', 93)" onmouseover="showTip(event, 'fs40', 93)" class="id">Open</span> <span class="k">do</span>
            <span class="k">try</span>
                <span class="k">match!</span> <span class="id">threadSafeWebSocket</span> <span class="o">|&gt;</span> <span class="id">ThreadSafeWebSocket</span><span class="pn">.</span><span class="id">receiveMessageAsUTF8</span> <span class="k">with</span>
                <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs41', 94)" onmouseover="showTip(event, 'fs41', 94)" class="id">Ok</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs42', 95)" onmouseover="showTip(event, 'fs42', 95)" class="id">WebSocket</span><span class="pn">.</span><span class="id">ReceiveUTF8Result</span><span class="pn">.</span><span class="id">String</span> <span class="id">text</span><span class="pn">)</span> <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs27', 96)" onmouseover="showTip(event, 'fs27', 96)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 97)" onmouseover="showTip(event, 'fs21', 97)" class="id">Verbose</span> <span class="pn">(</span><span class="s">&quot;Received: {payload}&quot;</span><span class="pn">,</span> <span class="id">text</span><span class="pn">)</span>

                    <span class="k">match</span> <span class="id">text</span> <span class="o">|&gt;</span> <span class="id">Decode</span><span class="pn">.</span><span class="id">fromString</span> <span onmouseout="hideTip(event, 'fs13', 98)" onmouseover="showTip(event, 'fs13', 98)" class="id">decodeIncomingMessage</span> <span class="k">with</span>
                    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs41', 99)" onmouseover="showTip(event, 'fs41', 99)" class="id">Ok</span> <span class="pn">(</span><span class="id">IncomingWebsocketMessage</span><span class="pn">.</span><span class="id">Response</span> <span class="id">response</span><span class="pn">)</span> <span class="k">-&gt;</span>
                        <span onmouseout="hideTip(event, 'fs27', 100)" onmouseover="showTip(event, 'fs27', 100)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 101)" onmouseover="showTip(event, 'fs21', 101)" class="id">Verbose</span> <span class="pn">(</span><span class="s">&quot;Decoded response: {response}&quot;</span><span class="pn">,</span> <span class="id">response</span><span class="pn">)</span>

                    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs41', 102)" onmouseover="showTip(event, 'fs41', 102)" class="id">Ok</span> <span class="pn">(</span><span class="id">IncomingWebsocketMessage</span><span class="pn">.</span><span class="id">Event</span> <span class="id">event</span><span class="pn">)</span> <span class="k">-&gt;</span>
                        <span onmouseout="hideTip(event, 'fs27', 103)" onmouseover="showTip(event, 'fs27', 103)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 104)" onmouseover="showTip(event, 'fs21', 104)" class="id">Verbose</span> <span class="pn">(</span><span class="s">&quot;Decoded payload: {event}&quot;</span><span class="pn">,</span> <span class="id">event</span><span class="pn">)</span>
                        <span class="k">try</span>
                            <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs29', 105)" onmouseover="showTip(event, 'fs29', 105)" class="id">websocketEventHandler</span> <span class="id">event</span>
                        <span class="k">with</span>
                        <span class="pn">|</span> <span class="id">e</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs27', 106)" onmouseover="showTip(event, 'fs27', 106)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 107)" onmouseover="showTip(event, 'fs21', 107)" class="id">Error</span> <span class="pn">(</span><span class="id">e</span><span class="pn">,</span> <span class="s">&quot;Error handling event: {message}&quot;</span><span class="pn">,</span> <span class="id">e</span><span class="pn">.</span><span class="id">Message</span><span class="pn">)</span>

                    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs43', 108)" onmouseover="showTip(event, 'fs43', 108)" class="id">Error</span> <span class="id">err</span> <span class="k">-&gt;</span>
                        <span onmouseout="hideTip(event, 'fs27', 109)" onmouseover="showTip(event, 'fs27', 109)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 110)" onmouseover="showTip(event, 'fs21', 110)" class="id">Error</span> <span class="pn">(</span><span class="s">&quot;Error decoding:\n{error}&quot;</span><span class="pn">,</span> <span class="id">err</span><span class="pn">)</span>

                <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs41', 111)" onmouseover="showTip(event, 'fs41', 111)" class="id">Ok</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs42', 112)" onmouseover="showTip(event, 'fs42', 112)" class="id">WebSocket</span><span class="pn">.</span><span class="id">ReceiveUTF8Result</span><span class="pn">.</span><span class="id">Closed</span> <span class="pn">(</span><span class="id">status</span><span class="pn">,</span> <span class="id">reason</span><span class="pn">)</span><span class="pn">)</span> <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs27', 113)" onmouseover="showTip(event, 'fs27', 113)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 114)" onmouseover="showTip(event, 'fs21', 114)" class="id">Warning</span> <span class="pn">(</span><span class="s">&quot;Socket closed with status {status} - Reason: {reason}&quot;</span><span class="pn">,</span> <span class="id">status</span><span class="pn">,</span> <span class="id">reason</span><span class="pn">)</span>

                <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs43', 115)" onmouseover="showTip(event, 'fs43', 115)" class="id">Error</span> <span class="id">ex</span> <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs27', 116)" onmouseover="showTip(event, 'fs27', 116)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 117)" onmouseover="showTip(event, 'fs21', 117)" class="id">Error</span> <span class="pn">(</span><span class="id">ex</span><span class="pn">.</span><span class="id">SourceException</span><span class="pn">,</span> <span class="s">&quot;Exception thrown while receiving&quot;</span><span class="pn">)</span>

            <span class="k">with</span> <span class="id">e</span> <span class="k">-&gt;</span>
                <span onmouseout="hideTip(event, 'fs27', 118)" onmouseover="showTip(event, 'fs27', 118)" class="id">logger</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 119)" onmouseover="showTip(event, 'fs21', 119)" class="id">Error</span> <span class="pn">(</span><span class="id">e</span><span class="pn">,</span> <span class="s">&quot;Unhandled error: {err}&quot;</span><span class="pn">,</span> <span class="id">e</span><span class="pn">.</span><span class="id">Message</span><span class="pn">)</span>

        <span class="c">// TODO: Escape hatch? Back-off? CancellationToken?</span>
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs26', 120)" onmouseover="showTip(event, 'fs26', 120)" class="id">subscribe</span> <span onmouseout="hideTip(event, 'fs27', 121)" onmouseover="showTip(event, 'fs27', 121)" class="id">logger</span> <span onmouseout="hideTip(event, 'fs28', 122)" onmouseover="showTip(event, 'fs28', 122)" class="id">config</span> <span onmouseout="hideTip(event, 'fs29', 123)" onmouseover="showTip(event, 'fs29', 123)" class="id">websocketEventHandler</span>
    <span class="pn">}</span>
</code></pre></td>
</tr>
</table>
<div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">namespace System.Text</div>
<div class="tip" id="fs3">namespace System.Threading</div>
<div class="tip" id="fs4">namespace Microsoft</div>
<div class="tip" id="fs5">namespace System.Net</div>
<div class="tip" id="fs6">namespace System.Net.WebSockets</div>
<div class="tip" id="fs7">namespace System.Threading.Tasks</div>
<div class="tip" id="fs8">namespace Microsoft.FSharp</div>
<div class="tip" id="fs9">namespace Microsoft.FSharp.Control</div>
<div class="tip" id="fs10">val decodeResponse : obj</div>
<div class="tip" id="fs11">type Decoder =<br />&#160;&#160;member Convert : bytes:ReadOnlySpan&lt;byte&gt; * chars:Span&lt;char&gt; * flush:bool * bytesUsed:int * charsUsed:int * completed:bool -&gt; unit + 2 overloads<br />&#160;&#160;member Fallback : DecoderFallback with get, set<br />&#160;&#160;member FallbackBuffer : DecoderFallbackBuffer<br />&#160;&#160;member GetCharCount : bytes:ReadOnlySpan&lt;byte&gt; * flush:bool -&gt; int + 3 overloads<br />&#160;&#160;member GetChars : bytes:ReadOnlySpan&lt;byte&gt; * chars:Span&lt;char&gt; * flush:bool -&gt; int + 3 overloads<br />&#160;&#160;member Reset : unit -&gt; unit</div>
<div class="tip" id="fs12">val decodeEventData : obj</div>
<div class="tip" id="fs13">val decodeIncomingMessage : obj</div>
<div class="tip" id="fs14">val handleTyping : botId:&#39;a * httpContext:&#39;b -&gt; handler:(&#39;c -&gt; Task) -&gt; event:&#39;d -&gt; &#39;e</div>
<div class="tip" id="fs15">val botId : &#39;a</div>
<div class="tip" id="fs16">val httpContext : &#39;b</div>
<div class="tip" id="fs17">val handler : (&#39;c -&gt; Task)</div>
<div class="tip" id="fs18">Multiple items<br />type Task =<br />&#160;&#160;new : action:Action -&gt; Task + 7 overloads<br />&#160;&#160;member AsyncState : obj<br />&#160;&#160;member ConfigureAwait : continueOnCapturedContext:bool -&gt; ConfiguredTaskAwaitable<br />&#160;&#160;member ContinueWith : continuationAction:Action&lt;Task&gt; -&gt; Task + 19 overloads<br />&#160;&#160;member CreationOptions : TaskCreationOptions<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member Exception : AggregateException<br />&#160;&#160;member GetAwaiter : unit -&gt; TaskAwaiter<br />&#160;&#160;member Id : int<br />&#160;&#160;member IsCanceled : bool<br />&#160;&#160;...<br /><br />--------------------<br />type Task&lt;&#39;TResult&gt; =<br />&#160;&#160;inherit Task<br />&#160;&#160;new : function:Func&lt;&#39;TResult&gt; -&gt; Task&lt;&#39;TResult&gt; + 7 overloads<br />&#160;&#160;member ConfigureAwait : continueOnCapturedContext:bool -&gt; ConfiguredTaskAwaitable&lt;&#39;TResult&gt;<br />&#160;&#160;member ContinueWith : continuationAction:Action&lt;Task&lt;&#39;TResult&gt;&gt; -&gt; Task + 19 overloads<br />&#160;&#160;member GetAwaiter : unit -&gt; TaskAwaiter&lt;&#39;TResult&gt;<br />&#160;&#160;member Result : &#39;TResult<br />&#160;&#160;static member Factory : TaskFactory&lt;&#39;TResult&gt;<br /><br />--------------------<br />Task(action: Action) : Task<br />Task(action: Action, cancellationToken: CancellationToken) : Task<br />Task(action: Action, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj) : Task<br />Task(action: Action, cancellationToken: CancellationToken, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: CancellationToken) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: CancellationToken, creationOptions: TaskCreationOptions) : Task<br /><br />--------------------<br />Task(function: Func&lt;&#39;TResult&gt;) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;&#39;TResult&gt;, cancellationToken: CancellationToken) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;&#39;TResult&gt;, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;&#39;TResult&gt;, cancellationToken: CancellationToken, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: CancellationToken) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(function: Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: CancellationToken, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;</div>
<div class="tip" id="fs19">val event : &#39;d</div>
<div class="tip" id="fs20">val id : x:&#39;T -&gt; &#39;T</div>
<div class="tip" id="fs21"></div>
<div class="tip" id="fs22">type Type =<br />&#160;&#160;inherit MemberInfo<br />&#160;&#160;member Assembly : Assembly<br />&#160;&#160;member AssemblyQualifiedName : string<br />&#160;&#160;member Attributes : TypeAttributes<br />&#160;&#160;member BaseType : Type<br />&#160;&#160;member ContainsGenericParameters : bool<br />&#160;&#160;member DeclaringMethod : MethodBase<br />&#160;&#160;member DeclaringType : Type<br />&#160;&#160;member Equals : o:obj -&gt; bool + 1 overload<br />&#160;&#160;member FindInterfaces : filter:TypeFilter * filterCriteria:obj -&gt; Type[]<br />&#160;&#160;member FindMembers : memberType:MemberTypes * bindingAttr:BindingFlags * filter:MemberFilter * filterCriteria:obj -&gt; MemberInfo[]<br />&#160;&#160;...</div>
<div class="tip" id="fs23">val handleStatusChange : botId:&#39;a * httpContext:&#39;b -&gt; handler:(&#39;c -&gt; Task) -&gt; event:&#39;d -&gt; &#39;e</div>
<div class="tip" id="fs24">val handleWebsocketEvent : botId:&#39;a * httpContext:&#39;b -&gt; handler:(&#39;c -&gt; Task) -&gt; websocketEvent:&#39;d -&gt; Task</div>
<div class="tip" id="fs25">val websocketEvent : &#39;d</div>
<div class="tip" id="fs26">val subscribe : logger:&#39;a -&gt; config:&#39;b -&gt; websocketEventHandler:(&#39;c -&gt; Task) -&gt; &#39;d</div>
<div class="tip" id="fs27">val logger : &#39;a</div>
<div class="tip" id="fs28">val config : &#39;b</div>
<div class="tip" id="fs29">val websocketEventHandler : (&#39;c -&gt; Task)</div>
<div class="tip" id="fs30">Multiple items<br />type CancellationToken =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : canceled:bool -&gt; CancellationToken<br />&#160;&#160;&#160;&#160;member CanBeCanceled : bool<br />&#160;&#160;&#160;&#160;member Equals : other:CancellationToken -&gt; bool + 1 overload<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member IsCancellationRequested : bool<br />&#160;&#160;&#160;&#160;member Register : callback:Action -&gt; CancellationTokenRegistration + 3 overloads<br />&#160;&#160;&#160;&#160;member ThrowIfCancellationRequested : unit -&gt; unit<br />&#160;&#160;&#160;&#160;member UnsafeRegister : callback:Action&lt;obj&gt; * state:obj -&gt; CancellationTokenRegistration<br />&#160;&#160;&#160;&#160;member WaitHandle : WaitHandle<br />&#160;&#160;&#160;&#160;static member None : CancellationToken<br />&#160;&#160;end<br /><br />--------------------<br />CancellationToken ()<br />CancellationToken(canceled: bool) : CancellationToken</div>
<div class="tip" id="fs31">property CancellationToken.None: CancellationToken with get</div>
<div class="tip" id="fs32">type Encoding =<br />&#160;&#160;member BodyName : string<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CodePage : int<br />&#160;&#160;member DecoderFallback : DecoderFallback with get, set<br />&#160;&#160;member EncoderFallback : EncoderFallback with get, set<br />&#160;&#160;member EncodingName : string<br />&#160;&#160;member Equals : value:obj -&gt; bool<br />&#160;&#160;member GetByteCount : chars:char[] -&gt; int + 5 overloads<br />&#160;&#160;member GetBytes : chars:char[] -&gt; byte[] + 7 overloads<br />&#160;&#160;member GetCharCount : bytes:byte[] -&gt; int + 3 overloads<br />&#160;&#160;...</div>
<div class="tip" id="fs33">property Encoding.UTF8: Encoding with get</div>
<div class="tip" id="fs34">Multiple items<br />type ClientWebSocket =<br />&#160;&#160;inherit WebSocket<br />&#160;&#160;new : unit -&gt; ClientWebSocket<br />&#160;&#160;member Abort : unit -&gt; unit<br />&#160;&#160;member CloseAsync : closeStatus:WebSocketCloseStatus * statusDescription:string * cancellationToken:CancellationToken -&gt; Task<br />&#160;&#160;member CloseOutputAsync : closeStatus:WebSocketCloseStatus * statusDescription:string * cancellationToken:CancellationToken -&gt; Task<br />&#160;&#160;member CloseStatus : Nullable&lt;WebSocketCloseStatus&gt;<br />&#160;&#160;member CloseStatusDescription : string<br />&#160;&#160;member ConnectAsync : uri:Uri * cancellationToken:CancellationToken -&gt; Task<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member Options : ClientWebSocketOptions<br />&#160;&#160;member ReceiveAsync : buffer:ArraySegment&lt;byte&gt; * cancellationToken:CancellationToken -&gt; Task&lt;WebSocketReceiveResult&gt; + 1 overload<br />&#160;&#160;...<br /><br />--------------------<br />ClientWebSocket() : ClientWebSocket</div>
<div class="tip" id="fs35">Multiple items<br />type Uri =<br />&#160;&#160;new : uriString:string -&gt; Uri + 5 overloads<br />&#160;&#160;member AbsolutePath : string<br />&#160;&#160;member AbsoluteUri : string<br />&#160;&#160;member Authority : string<br />&#160;&#160;member DnsSafeHost : string<br />&#160;&#160;member Equals : comparand:obj -&gt; bool<br />&#160;&#160;member Fragment : string<br />&#160;&#160;member GetComponents : components:UriComponents * format:UriFormat -&gt; string<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;member GetLeftPart : part:UriPartial -&gt; string<br />&#160;&#160;...<br /><br />--------------------<br />Uri(uriString: string) : Uri<br />Uri(uriString: string, uriKind: UriKind) : Uri<br />Uri(baseUri: Uri, relativeUri: string) : Uri<br />Uri(baseUri: Uri, relativeUri: Uri) : Uri</div>
<div class="tip" id="fs36">Multiple items<br />type ArraySegment&lt;&#39;T&gt; =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : array:&#39;T[] -&gt; ArraySegment&lt;&#39;T&gt; + 1 overload<br />&#160;&#160;&#160;&#160;member Array : &#39;T[]<br />&#160;&#160;&#160;&#160;member CopyTo : destination:&#39;T[] -&gt; unit + 2 overloads<br />&#160;&#160;&#160;&#160;member Count : int<br />&#160;&#160;&#160;&#160;member Equals : obj:obj -&gt; bool + 1 overload<br />&#160;&#160;&#160;&#160;member GetEnumerator : unit -&gt; Enumerator&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member Item : int -&gt; &#39;T with get, set<br />&#160;&#160;&#160;&#160;member Offset : int<br />&#160;&#160;&#160;&#160;member Slice : index:int -&gt; ArraySegment&lt;&#39;T&gt; + 1 overload<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;&#160;&#160;nested type Enumerator<br />&#160;&#160;end<br /><br />--------------------<br />ArraySegment ()<br />ArraySegment(array: &#39;T []) : ArraySegment&lt;&#39;T&gt;<br />ArraySegment(array: &#39;T [], offset: int, count: int) : ArraySegment&lt;&#39;T&gt;</div>
<div class="tip" id="fs37">type WebSocketMessageType =<br />&#160;&#160;| Text = 0<br />&#160;&#160;| Binary = 1<br />&#160;&#160;| Close = 2</div>
<div class="tip" id="fs38">field WebSocketMessageType.Text: WebSocketMessageType = 0</div>
<div class="tip" id="fs39">type WebSocketState =<br />&#160;&#160;| None = 0<br />&#160;&#160;| Connecting = 1<br />&#160;&#160;| Open = 2<br />&#160;&#160;| CloseSent = 3<br />&#160;&#160;| CloseReceived = 4<br />&#160;&#160;| Closed = 5<br />&#160;&#160;| Aborted = 6</div>
<div class="tip" id="fs40">field WebSocketState.Open: WebSocketState = 2</div>
<div class="tip" id="fs41">union case Result.Ok: ResultValue: &#39;T -&gt; Result&lt;&#39;T,&#39;TError&gt;</div>
<div class="tip" id="fs42">type WebSocket =<br />&#160;&#160;member Abort : unit -&gt; unit<br />&#160;&#160;member CloseAsync : closeStatus:WebSocketCloseStatus * statusDescription:string * cancellationToken:CancellationToken -&gt; Task<br />&#160;&#160;member CloseOutputAsync : closeStatus:WebSocketCloseStatus * statusDescription:string * cancellationToken:CancellationToken -&gt; Task<br />&#160;&#160;member CloseStatus : Nullable&lt;WebSocketCloseStatus&gt;<br />&#160;&#160;member CloseStatusDescription : string<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member ReceiveAsync : buffer:ArraySegment&lt;byte&gt; * cancellationToken:CancellationToken -&gt; Task&lt;WebSocketReceiveResult&gt; + 1 overload<br />&#160;&#160;member SendAsync : buffer:ArraySegment&lt;byte&gt; * messageType:WebSocketMessageType * endOfMessage:bool * cancellationToken:CancellationToken -&gt; Task + 1 overload<br />&#160;&#160;member State : WebSocketState<br />&#160;&#160;member SubProtocol : string<br />&#160;&#160;...</div>
<div class="tip" id="fs43">union case Result.Error: ErrorValue: &#39;TError -&gt; Result&lt;&#39;T,&#39;TError&gt;</div>

